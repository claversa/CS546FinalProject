<div class="countdown-content">
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
    <!--will get displayed in the following p element-->
    <div>
        <p id="count" class="count"></p>
    </div>
    <br />
    {{#if hasRaces}}
    <button class="confetti-btn" type="button">GET EXCITED!</button>
    <!--Countdown learned from https://www.w3schools.com/howto/howto_js_countdown.asp-->
    <script>
        function triggerConfetti() {
            confetti({
                particleCount: 400,
                spread: 90,
                origin: { x: 1, y: 0.9 },
            });

            confetti({
                particleCount: 400,
                spread: 90,
                origin: { x: 0, y: 0.9 },
            });
        }

        // date counting down to
        //var countDownDate = new Date({{{ raceDate }}}).getTime(); // give race date from routes
        var countDownDate = new Date(`{{ raceDate }}`); // give race date from routes

        // Update the count down every 1 second
        var x = setInterval(function () {

            // Today's date and time
            //var now = new Date().getTime();
            var now = new Date();

            // Distance between now and the count down date
            var distance = countDownDate - now;

            // calcs for days, hours, minutes, seconds
            var days = Math.ceil(distance / (1000 * 60 * 60 * 24));
            //var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            //var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            //var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            //document.getElementById("count").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
            let word = days > 1 ? " DAYS" : " DAY";
            document.getElementById("count").innerHTML = days + word;



            // If count down finished
            if (distance < 0) {
                clearInterval(x);
                document.getElementById("count").innerHTML = "EXPIRED";
            }
        }, 1000);
        let confettiBtn = document.querySelector(".confetti-btn");
        confettiBtn.addEventListener("click", triggerConfetti)
    </script>
    {{else}}
    <p>You are not currently registered for any races.</p>
    <a href="./home.handlebars" class = "register-btn">REGISTER NOW!</a>
    {{/if}}
</div>